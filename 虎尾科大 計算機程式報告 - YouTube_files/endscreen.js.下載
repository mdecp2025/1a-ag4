(function(g){var window=this;'use strict';var KD=function(w){w.publish("autonavvisibility")},faO=function(w,Q){g.hU(w,"onAutonavCoundownStarted",Q)},P8=function(w){return w.isBackground()&&w.Fp()},d2R=function(w,Q){Q=Q.getWatchNextResponse()?.playerOverlays?.playerOverlayRenderer?.autoplay?.playerOverlayAutoplayRenderer?.nextButton?.buttonRenderer;
w.V=Q?.navigationEndpoint;Q=Q?.trackingParams;w.playButton&&Q&&w.K.setTrackingParams(w.playButton.element,Q)},H8=function(w){const Q=gA(w);
var G=Math,J=G.min;var N=w.Z?Date.now()-w.Z:0;G=J.call(G,N,Q);eZ(w,Math.ceil((Q-G)/1E3));Q-G<=500&&w.Y()?w.select(!0):w.Y()&&w.C.start()},hW=function(w){var Q=w.K.Ws(!0,w.K.isFullscreen());
g.d(w.container.element,"ytp-autonav-endscreen-small-mode",w.Dx(Q));g.d(w.container.element,"ytp-autonav-endscreen-is-premium",!!w.suggestion&&!!w.suggestion.Iu);g.d(w.K.getRootNode(),"ytp-autonav-endscreen-cancelled-state",!w.K.A0());g.d(w.K.getRootNode(),"countdown-running",w.Y());g.d(w.container.element,"ytp-player-content",w.K.A0());g.jg(w.overlay.element,{width:`${Q.width}px`});if(!w.Y()){w.K.A0()?eZ(w,Math.round(gA(w)/1E3)):eZ(w);Q=!!w.suggestion&&!!w.suggestion.TP;const G=w.K.A0()||!Q;g.d(w.container.element,
"ytp-autonav-endscreen-upnext-alternative-header-only",!G&&Q);g.d(w.container.element,"ytp-autonav-endscreen-upnext-no-alternative-header",G&&!Q);w.G.fK(w.K.A0());g.d(w.element,"ytp-enable-w2w-color-transitions",!!w.K.getVideoData()?.watchToWatchTransitionRenderer)}},eZ=function(w,Q=-1){w=w.L.AU("ytp-autonav-endscreen-upnext-header");
g.Ue(w);if(Q>=0){Q=String(Q);const G="\u4e0b\u4e00\u90e8\u5f71\u7247\u5c07\u5728 $SECONDS \u79d2\u5f8c\u64ad\u653e".match(RegExp("\\$SECONDS","gi"))[0],J="\u4e0b\u4e00\u90e8\u5f71\u7247\u5c07\u5728 $SECONDS \u79d2\u5f8c\u64ad\u653e".indexOf(G);if(J>=0){w.appendChild(g.b9("\u4e0b\u4e00\u90e8\u5f71\u7247\u5c07\u5728 $SECONDS \u79d2\u5f8c\u64ad\u653e".slice(0,J)));const N=g.Xb("span");g.G1(N,"ytp-autonav-endscreen-upnext-header-countdown-number");g.rf(N,Q);w.appendChild(N);w.appendChild(g.b9("\u4e0b\u4e00\u90e8\u5f71\u7247\u5c07\u5728 $SECONDS \u79d2\u5f8c\u64ad\u653e".slice(J+
G.length)));return}}g.rf(w,"\u5373\u5c07\u64ad\u653e")},gA=function(w){return w.K.isFullscreen()?(w=w.K.getVideoData()?.fV,w===-1||w===void 0?8E3:w):w.K.JB()>=0?w.K.JB():g.el(w.K.j().experiments,"autoplay_time")||1E4},jZ=function(w,Q){Q=zur(w,Q);
var G=Math,J=G.min;var N=(0,g.l)()-w.Z;G=J.call(G,N,Q);Q=Q===0?1:Math.min(G/Q,1);w.JU.setAttribute("stroke-dashoffset",`${-211*(Q+1)}`);Q>=1&&w.Y()&&w.api.getPresentingPlayerType()!==3?w.select(!0):w.Y()&&w.L.start()},zur=function(w,Q){return Q?Q:w.api.isFullscreen()?(w=w.api.getVideoData()?.fV,w===-1||w===void 0?8E3:w):w.api.JB()>=0?w.api.JB():g.el(w.api.j().experiments,"autoplay_time")||1E4},Em=function(w){const Q=w.A0();
Q!==w.Z&&(w.Z=Q,KD(w.player),w.Z?(w.W!==w.Y&&w.W.hide(),w.table.hide()):(w.W!==w.Y&&w.W.show(),w.table.show()))},T$=function(w){return g.mV(w.player)&&w.L()&&!w.J},pD=function(w){const Q=w.A0();
Q!==w.C&&(w.C=Q,KD(w.player))},uU=function(w){return g.mV(w.player)&&w.L()&&!w.G},wC=function(w){const Q=w.A0();
Q!==w.YB&&(w.YB=Q,KD(w.player))},cw2=function(w){w=w.j();
return w.hd&&!w.Pa&&!w.disableOrganicUi},Ruk=function(w){const Q=w.player.getVideoData();
if(!Q||w.Y===Q.Pa&&w.W===Q.Nc)return!1;w.Y=Q.Pa;w.W=Q.Nc;return!0},OEd=function(w){w.player.nE("endscreen");
var Q=w.player.getVideoData();Q=new g.ZO(Math.max((Q.lengthSeconds-10)*1E3,0),0x8000000000000,{id:"preload",namespace:"endscreen"});const G=new g.ZO(0x8000000000000,0x8000000000000,{id:"load",priority:8,namespace:"endscreen"});w.player.g7([Q,G])};
g.wV.prototype.JB=g.rF(9,function(){return this.app.JB()});
g.RX.prototype.JB=g.rF(8,function(){return this.getVideoData().Di});
g.ug.prototype.kZ=g.rF(7,function(w){this.Si().kZ(w)});
g.Aa.prototype.kZ=g.rF(6,function(w){this.OF!==w&&(this.OF=w,this.xM())});
var laj=class extends g.T{constructor(w){const Q=w.j(),G=Q.L;super({S:"a",X:"ytp-autonav-suggestion-card",T:{href:"{{url}}",target:G?Q.C:"","aria-label":"{{aria_label}}","data-is-live":"{{is_live}}","data-is-list":"{{is_list}}","data-is-mix":"{{is_mix}}","data-is-upcoming":"{{is_upcoming}}"},N:[{S:"div",qc:["ytp-autonav-endscreen-upnext-thumbnail","ytp-autonav-thumbnail-small"],T:{style:"{{background}}"},N:[{S:"div",T:{"aria-label":"{{timestamp}}"},qc:["ytp-autonav-timestamp"],QX:"{{duration}}"},
{S:"div",qc:["ytp-autonav-live-stamp"],QX:"\u76f4\u64ad"},{S:"div",qc:["ytp-autonav-upcoming-stamp"],QX:"\u5373\u5c07\u64ad\u51fa"},{S:"div",X:"ytp-autonav-list-overlay",N:[{S:"div",X:"ytp-autonav-mix-text",QX:"\u5408\u8f2f"},{S:"div",X:"ytp-autonav-mix-icon"}]}]},{S:"div",qc:["ytp-autonav-endscreen-upnext-title","ytp-autonav-title-card"],QX:"{{title}}"},{S:"div",qc:["ytp-autonav-endscreen-upnext-author","ytp-autonav-author-card"],QX:"{{author}}"},{S:"div",qc:["ytp-autonav-endscreen-upnext-author",
"ytp-autonav-view-and-date-card"],QX:"{{views_and_publish_time}}"}]});this.K=w;this.suggestion=null;this.Y=G;this.listen("click",this.onClick);this.listen("keypress",this.onKeyPress)}select(){this.K.Gz(this.suggestion.videoId,this.suggestion.sessionData,this.suggestion.playlistId,void 0,void 0,this.suggestion.lq||void 0)&&this.K.logClick(this.element)}onClick(w){g.DO(w,this.K,this.Y,this.suggestion.sessionData||void 0)&&this.select()}onKeyPress(w){switch(w.keyCode){case 13:case 32:w.defaultPrevented||
(this.select(),w.preventDefault())}}};var iE=class extends g.T{constructor(w,Q=!1){super({S:"div",X:"ytp-autonav-endscreen-countdown-overlay"});this.kB=Q;this.cancelCommand=this.V=void 0;this.Z=0;this.container=new g.T({S:"div",X:"ytp-autonav-endscreen-countdown-container"});g.Y(this,this.container);this.container.SZ(this.element);Q=w.j();const G=Q.L;this.K=w;this.suggestion=null;this.onVideoDataChange("newdata",this.K.getVideoData());this.D(w,"videodatachange",this.onVideoDataChange);this.L=new g.T({S:"div",X:"ytp-autonav-endscreen-upnext-container",
T:{"aria-label":"{{aria_label}}","data-is-live":"{{is_live}}","data-is-list":"{{is_list}}","data-is-mix":"{{is_mix}}","data-is-upcoming":"{{is_upcoming}}"},N:[{S:"div",X:"ytp-autonav-endscreen-upnext-header"},{S:"div",X:"ytp-autonav-endscreen-upnext-alternative-header",QX:"{{autoplayAlternativeHeader}}"},{S:"a",X:"ytp-autonav-endscreen-link-container",T:{href:"{{url}}",target:G?Q.C:""},N:[{S:"div",X:"ytp-autonav-endscreen-upnext-thumbnail",T:{style:"{{background}}"},N:[{S:"div",T:{"aria-label":"{{timestamp}}"},
qc:["ytp-autonav-timestamp"],QX:"{{duration}}"},{S:"div",qc:["ytp-autonav-live-stamp"],QX:"\u76f4\u64ad"},{S:"div",qc:["ytp-autonav-upcoming-stamp"],QX:"\u5373\u5c07\u64ad\u51fa"}]},{S:"div",X:"ytp-autonav-endscreen-video-info",N:[{S:"div",X:"ytp-autonav-endscreen-premium-badge"},{S:"div",X:"ytp-autonav-endscreen-upnext-title",QX:"{{title}}"},{S:"div",X:"ytp-autonav-endscreen-upnext-author",QX:"{{author}}"},{S:"div",X:"ytp-autonav-view-and-date",QX:"{{views_and_publish_time}}"},{S:"div",X:"ytp-autonav-author-and-view",
QX:"{{author_and_views}}"}]}]}]});g.Y(this,this.L);this.L.SZ(this.container.element);G||this.D(this.L.AU("ytp-autonav-endscreen-link-container"),"click",this.PL);this.K.createClientVe(this.container.element,this,115127);this.K.createClientVe(this.L.AU("ytp-autonav-endscreen-link-container"),this,115128);this.overlay=new g.T({S:"div",X:"ytp-autonav-overlay"});g.Y(this,this.overlay);this.overlay.SZ(this.container.element);this.G=new g.T({S:"div",X:"ytp-autonav-endscreen-button-container"});g.Y(this,
this.G);this.G.SZ(this.container.element);this.cancelButton=new g.T({S:"button",qc:["ytp-autonav-endscreen-upnext-button","ytp-autonav-endscreen-upnext-cancel-button","ytp-autonav-endscreen-upnext-button-rounded"],T:{"aria-label":"\u53d6\u6d88\u81ea\u52d5\u64ad\u653e"},QX:"\u53d6\u6d88"});g.Y(this,this.cancelButton);this.cancelButton.SZ(this.G.element);this.cancelButton.listen("click",this.JU,this);this.K.createClientVe(this.cancelButton.element,this,115129);this.playButton=new g.T({S:"a",qc:["ytp-autonav-endscreen-upnext-button",
"ytp-autonav-endscreen-upnext-play-button","ytp-autonav-endscreen-upnext-button-rounded"],T:{href:"{{url}}",role:"button","aria-label":"\u64ad\u653e\u4e0b\u4e00\u90e8\u5f71\u7247"},QX:"\u7acb\u5373\u64ad\u653e"});g.Y(this,this.playButton);this.playButton.SZ(this.G.element);this.playButton.listen("click",this.PL,this);this.K.createServerVe(this.playButton.element,this.playButton,!0);(Q=this.K.getVideoData())&&d2R(this,Q);this.C=new g.ph(()=>{H8(this)},500);
g.Y(this,this.C);this.YB();this.D(w,"autonavvisibility",this.YB);this.K.U("web_autonav_color_transition")&&(this.D(w,"autonavchange",this.RT),this.D(w,"onAutonavCoundownStarted",this.hU))}O(w){this.suggestion!==w&&(this.suggestion=w,g.tf(this.L,w),this.playButton.updateValue("url",this.suggestion.Gv()),hW(this))}Y(){return this.Z>0}J(){this.Y()||(this.Z=Date.now(),H8(this),faO(this.K,gA(this)),g.d(this.K.getRootNode(),"countdown-running",this.Y()))}A(){this.W();H8(this);const w=this.L.AU("ytp-autonav-endscreen-upnext-header");
w&&g.rf(w,"\u5373\u5c07\u64ad\u653e")}W(){this.Y()&&(this.C.stop(),this.Z=0)}select(w=!1){this.K.nextVideo(!1,w);this.W()}PL(w){g.DO(w,this.K)&&(w.currentTarget===this.playButton.element?this.K.logClick(this.playButton.element):w.currentTarget===this.L.AU("ytp-autonav-endscreen-link-container")&&(w=this.L.AU("ytp-autonav-endscreen-link-container"),this.K.logVisibility(w,!0),this.K.logClick(w)),this.V?(g.hU(this.K,"innertubeCommand",this.V),this.W()):this.select())}JU(){this.K.logClick(this.cancelButton.element);
g.LM(this.K,!0);this.cancelCommand&&g.hU(this.K,"innertubeCommand",this.cancelCommand)}onVideoDataChange(w,Q){d2R(this,Q);this.cancelCommand=Q.getWatchNextResponse()?.playerOverlays?.playerOverlayRenderer?.autoplay?.playerOverlayAutoplayRenderer?.cancelButton?.buttonRenderer?.command}hU(w){if(this.K.getVideoData()?.watchToWatchTransitionRenderer){var Q=this.K.getVideoData().watchToWatchTransitionRenderer;const G=Q?.fromColorPaletteDark,J=Q?.toColorPaletteDark;G&&J&&(Q=this.element,Q.style.setProperty("--w2w-start-background-color",
g.ih(G.surgeColor)),Q.style.setProperty("--w2w-start-primary-text-color",g.ih(G.primaryTitleColor)),Q.style.setProperty("--w2w-start-secondary-text-color",g.ih(G.secondaryTitleColor)),Q.style.setProperty("--w2w-end-background-color",g.ih(J.surgeColor)),Q.style.setProperty("--w2w-end-primary-text-color",g.ih(J.primaryTitleColor)),Q.style.setProperty("--w2w-end-secondary-text-color",g.ih(J.secondaryTitleColor)),Q.style.setProperty("--w2w-animation-duration",`${w}ms`));g.d(this.element,"ytp-w2w-animate",
!0)}}RT(w){this.K.U("web_autonav_color_transition")&&w!==2&&g.d(this.element,"ytp-w2w-animate",!1)}YB(){const w=this.K.A0();this.kB&&this.rd!==w&&this.fK(w);hW(this);this.K.logVisibility(this.container.element,w);this.K.logVisibility(this.cancelButton.element,w);this.K.logVisibility(this.L.AU("ytp-autonav-endscreen-link-container"),w);this.K.logVisibility(this.playButton.element,w)}Dx(w){return w.width<400||w.height<459}};var QD=class extends g.T{constructor(w,Q){super({S:"div",qc:["html5-endscreen","ytp-player-content",Q||"base-endscreen"]});this.created=!1;this.player=w}create(){this.created=!0}destroy(){this.created=!1}L(){return!1}A0(){return!1}V(){return!1}};var Gq=class extends g.T{constructor(w){super({S:"div",qc:["ytp-upnext","ytp-player-content"],T:{"aria-label":"{{aria_label}}"},N:[{S:"div",X:"ytp-cued-thumbnail-overlay-image",T:{style:"{{background}}"}},{S:"span",X:"ytp-upnext-top",N:[{S:"span",X:"ytp-upnext-header",QX:"\u5373\u5c07\u64ad\u653e"},{S:"span",X:"ytp-upnext-title",QX:"{{title}}"},{S:"span",X:"ytp-upnext-author",QX:"{{author}}"}]},{S:"a",X:"ytp-upnext-autoplay-icon",T:{role:"button",href:"{{url}}","aria-label":"\u64ad\u653e\u4e0b\u4e00\u90e8\u5f71\u7247"},
N:[{S:"svg",T:{height:"100%",version:"1.1",viewBox:"0 0 72 72",width:"100%"},N:[{S:"circle",X:"ytp-svg-autoplay-circle",T:{cx:"36",cy:"36",fill:"#fff","fill-opacity":"0.3",r:"31.5"}},{S:"circle",X:"ytp-svg-autoplay-ring",T:{cx:"-36",cy:"36","fill-opacity":"0",r:"33.5",stroke:"#FFFFFF","stroke-dasharray":"211","stroke-dashoffset":"-211","stroke-width":"4",transform:"rotate(-90)"}},{S:"path",X:"ytp-svg-fill",T:{d:"M 24,48 41,36 24,24 V 48 z M 44,24 v 24 h 4 V 24 h -4 z"}}]}]},{S:"span",X:"ytp-upnext-bottom",
N:[{S:"span",X:"ytp-upnext-cancel"},{S:"span",X:"ytp-upnext-paused",QX:"\u5df2\u66ab\u505c\u81ea\u52d5\u64ad\u653e\u529f\u80fd"}]}]});this.api=w;this.cancelButton=null;this.JU=this.AU("ytp-svg-autoplay-ring");this.C=this.notification=this.L=this.suggestion=null;this.V=new g.ph(this.G,5E3,this);this.Z=0;var Q=this.AU("ytp-upnext-cancel");this.cancelButton=new g.T({S:"button",qc:["ytp-upnext-cancel-button","ytp-button"],T:{tabindex:"0","aria-label":"\u53d6\u6d88\u81ea\u52d5\u64ad\u653e"},QX:"\u53d6\u6d88"});
g.Y(this,this.cancelButton);this.cancelButton.listen("click",this.PL,this);this.cancelButton.SZ(Q);this.cancelButton&&this.api.createClientVe(this.cancelButton.element,this,115129);g.Y(this,this.V);this.api.createClientVe(this.element,this,18788);Q=this.AU("ytp-upnext-autoplay-icon");this.D(Q,"click",this.RT);this.api.createClientVe(Q,this,115130);this.YB();this.D(w,"autonavvisibility",this.YB);this.D(w,"mdxnowautoplaying",this.hU);this.D(w,"mdxautoplaycanceled",this.kB);g.d(this.element,"ytp-upnext-mobile",
this.api.j().W)}G(){this.notification&&(this.V.stop(),this.Gl(this.C),this.C=null,this.notification.close(),this.notification=null)}O(w){this.suggestion=w;g.tf(this,w,"hqdefault.jpg")}YB(){this.fK(this.api.A0());this.api.logVisibility(this.element,this.api.A0());this.api.logVisibility(this.AU("ytp-upnext-autoplay-icon"),this.api.A0());this.cancelButton&&this.api.logVisibility(this.cancelButton.element,this.api.A0())}Fb(){window.focus();this.G()}J(w){this.Y()||(g.oR("a11y-announce",`${"\u5373\u5c07\u64ad\u653e"} ${this.suggestion.title}`),
this.Z=(0,g.l)(),this.L=new g.ph(()=>{jZ(this,w)},25),jZ(this,w),faO(this.api,zur(this,w)));
g.Wv(this.element,"ytp-upnext-autoplay-paused")}hide(){super.hide()}Y(){return!!this.L}A(){this.W();this.Z=(0,g.l)();jZ(this);g.NN(this.element,"ytp-upnext-autoplay-paused")}W(){this.Y()&&(this.L.dispose(),this.L=null)}select(w=!1){if(this.api.j().U("autonav_notifications")&&w&&window.Notification&&typeof document.hasFocus==="function"){const Q=Notification.permission;Q==="default"?Notification.requestPermission():Q!=="granted"||document.hasFocus()||(this.G(),this.notification=new Notification("\u5373\u5c07\u64ad\u653e",
{body:this.suggestion.title,icon:this.suggestion.FM()}),this.C=this.D(this.notification,"click",this.Fb),this.V.start())}this.W();this.api.nextVideo(!1,w)}RT(w){!g.kt(this.cancelButton.element,w.target)&&g.DO(w,this.api)&&(this.api.A0()&&this.api.logClick(this.AU("ytp-upnext-autoplay-icon")),this.select())}PL(){this.api.A0()&&this.cancelButton&&this.api.logClick(this.cancelButton.element);g.LM(this.api,!0)}hU(w){this.api.getPresentingPlayerType();this.show();this.J(w)}kB(){this.api.getPresentingPlayerType();
this.W();this.hide()}Ez(){this.W();this.G();super.Ez()}};var P9o=class extends QD{constructor(w){super(w,"autonav-endscreen");this.overlay=this.videoData=null;this.table=new g.T({S:"div",X:"ytp-suggestion-panel",N:[{S:"div",qc:["ytp-autonav-endscreen-upnext-header","ytp-autonav-endscreen-more-videos"],QX:"\u66f4\u591a\u5f71\u7247"}]});this.C=new g.T({S:"div",X:"ytp-suggestions-container"});this.videos=[];this.A=null;this.Z=this.O=!1;this.W=new iE(this.player);g.Y(this,this.W);this.W.SZ(this.element);w.getVideoData().Nc?this.Y=this.W:(this.Y=new Gq(w),g.$z(this.player,
this.Y.element,4),g.Y(this,this.Y));this.overlay=new g.T({S:"div",X:"ytp-autonav-overlay-cancelled-state"});g.Y(this,this.overlay);this.overlay.SZ(this.element);this.J=new g.WF(this);g.Y(this,this.J);g.Y(this,this.table);this.table.SZ(this.element);this.table.show();g.Y(this,this.C);this.C.SZ(this.table.element);this.hide()}create(){super.create();this.J.D(this.player,"appresize",this.G);this.J.D(this.player,"onVideoAreaChange",this.G);this.J.D(this.player,"videodatachange",this.onVideoDataChange);
this.J.D(this.player,"autonavchange",this.YB);this.J.D(this.player,"onAutonavCancelled",this.PL);this.onVideoDataChange()}show(){super.show();(this.O||this.A&&this.A!==this.videoData.clientPlaybackNonce)&&g.LM(this.player,!1);g.mV(this.player)&&this.L()&&!this.A?(Em(this),this.videoData.autonavState===2?this.player.getVisibilityState()===3||P8(this.player.tK())&&this.player.U("web_player_pip_logging_fix")?this.Y.select(!0):this.Y.J():this.videoData.autonavState===3&&this.Y.A()):(g.LM(this.player,
!0),Em(this));this.G()}hide(){super.hide();this.Y.A();Em(this)}G(){var w=this.player.Ws(!0,this.player.isFullscreen());Em(this);hW(this.W);g.d(this.element,"ytp-autonav-cancelled-small-mode",this.Dx(w));g.d(this.element,"ytp-autonav-cancelled-tiny-mode",this.Iy(w));g.d(this.element,"ytp-autonav-cancelled-mini-mode",w.width<=400||w.height<=360);this.overlay&&g.jg(this.overlay.element,{width:`${w.width}px`});if(!this.Z)for(w=0;w<this.videos.length;w++)g.d(this.videos[w].element,"ytp-suggestion-card-with-margin",
w%2===1)}onVideoDataChange(){var w=this.player.getVideoData();if(this.videoData!==w&&w){this.videoData=w;w=this.videoData.suggestions;var Q=this.videoData.Mc();Q&&(this.Y.O(Q),this.Y!==this.W&&this.W.O(Q));if(w&&w.length)for(let J=0;J<K6R.length;++J){var G=K6R[J];w&&w[G]&&(this.videos[J]=new laj(this.player),Q=this.videos[J],G=w[G],Q.suggestion!==G&&(Q.suggestion=G,g.tf(Q,G)),g.Y(this,this.videos[J]),this.videos[J].SZ(this.C.element))}this.G()}}YB(w){w===1?(this.O=!1,this.A=this.videoData.clientPlaybackNonce,
this.Y.W(),this.rd&&this.G()):(this.O=!0,this.A0()&&(w===2?this.Y.J():w===3&&this.Y.A()))}PL(w){w?this.YB(1):(this.A=null,this.O=!1)}L(){return this.videoData.autonavState!==1}Dx(w){return(w.width<910||w.height<459)&&!this.Iy(w)&&!(w.width<=400||w.height<=360)}Iy(w){return w.width<800&&!(w.width<=400||w.height<=360)}A0(){return this.rd&&g.mV(this.player)&&this.L()&&!this.A}},K6R=[1,3,2,4];var gt3=class extends QD{constructor(w){super(w,"videowall-endscreen");this.K=w;this.stills=[];this.J=this.videoData=null;this.G=this.C=!1;this.YB=null;g.NN(this.element,"modern-videowall-endscreen");this.W=new g.WF(this);g.Y(this,this.W);this.Z=new g.ph(()=>{g.NN(this.element,"ytp-show-tiles")},0);
g.Y(this,this.Z);this.table=new g.Uh({S:"div",X:"ytp-modern-endscreen-content"});g.Y(this,this.table);this.table.SZ(this.element);w.getVideoData().Nc?this.Y=new iE(w,!0):this.Y=new Gq(w);g.Y(this,this.Y);g.$z(this.player,this.Y.element,4);w.createClientVe(this.element,this,158789);this.hide()}create(){super.create();var w=this.player.getVideoData();w&&(this.videoData=w);this.A();this.W.D(this.player,"appresize",this.A);this.W.D(this.player,"onVideoAreaChange",this.A);this.W.D(this.player,"videodatachange",
this.onVideoDataChange);this.W.D(this.player,"autonavchange",this.O);this.W.D(this.player,"onAutonavCancelled",this.PL);w=this.videoData.autonavState;w!==this.YB&&this.O(w);this.W.D(this.element,"transitionend",this.RT)}destroy(){g.L0(this.W);g.JD(this.stills);this.stills=[];super.destroy();g.Wv(this.element,"ytp-show-tiles");this.Z.stop();this.YB=this.videoData.autonavState}L(){return this.videoData.autonavState!==1}show(){const w=this.rd;super.show();g.Wv(this.element,"ytp-show-tiles");this.player.j().W?
g.uu(this.Z):this.Z.start();(this.G||this.J&&this.J!==this.videoData.clientPlaybackNonce)&&g.LM(this.player,!1);T$(this)?(pD(this),this.videoData.autonavState===2?this.player.getVisibilityState()===3||P8(this.player.tK())&&this.player.U("web_player_pip_logging_fix")?this.Y.select(!0):this.Y.J():this.videoData.autonavState===3&&this.Y.A()):(g.LM(this.player,!0),pD(this));w!==this.rd&&this.player.logVisibility(this.element,!0)}hide(){const w=this.rd;super.hide();this.Y.A();pD(this);w!==this.rd&&this.player.logVisibility(this.element,
!1)}RT(w){w.target===this.element&&this.A()}A(){const w=this.videoData?.suggestions?.length?this.videoData?.suggestions:[this.videoData?.Mc()];if(w.length){var Q=this.K.Ws(!0,this.K.isFullscreen()),G=Math.floor((Q.width-64+16)/(g.lq(Q.width*.27,250,450)+16));Q=Math.min(3,Math.floor((Q.height-64)/((Q.width-64-(G-1)*16)/G*.5625+70)));g.tZ(this.element,["ytp-modern-endscreen-limit-rows-1","ytp-modern-endscreen-limit-rows-2","ytp-modern-endscreen-limit-rows-3"]);g.NN(this.element,`ytp-modern-endscreen-limit-rows-${Q}`);
g.d(this.element,"ytp-modern-endscreen-single-item",G===1);g.d(this.element,"ytp-modern-endscreen-row-0",Q===0);G=this.table.element;G.ariaLive="polite";this.Y.O(this.videoData.Mc());this.Y instanceof iE&&hW(this.Y);g.d(this.element,"ytp-endscreen-takeover",T$(this));pD(this);Q=0;G.ariaBusy="true";var J=w.length;for(let N=0;N<J;N++){const C=N%J;let W=this.stills[N];W||(W=new g.N1u(this.player),this.stills[N]=W,G.appendChild(W.element));g.e7u(W,w[C]);Q++}this.stills.length=Q}}onVideoDataChange(){const w=
this.player.getVideoData(1);this.videoData!==w&&(w?.Mc()?(this.videoData=w,this.A()):this.player.WL("missg",{vid:w?.videoId||"",cpn:w?.clientPlaybackNonce||""}))}V(){return this.Y.Y()}O(w){w===1?(this.G=!1,this.J=this.videoData.clientPlaybackNonce,this.Y.W(),this.rd&&this.A()):(this.G=!0,this.rd&&T$(this)&&(w===2?this.Y.J():w===3&&this.Y.A()))}PL(w){if(w){for(w=0;w<this.stills.length;w++)this.K.logVisibility(this.stills[w].element,!0);this.O(1)}else this.J=null,this.G=!1;this.A()}A0(){return this.rd&&
T$(this)}};var euJ=class extends QD{constructor(w){super(w,"subscribecard-endscreen");this.Y=new g.T({S:"div",X:"ytp-subscribe-card",N:[{S:"img",X:"ytp-author-image",T:{src:"{{profilePicture}}"}},{S:"div",X:"ytp-subscribe-card-right",N:[{S:"div",X:"ytp-author-name",QX:"{{author}}"},{S:"div",X:"html5-subscribe-button-container"}]}]});g.Y(this,this.Y);this.Y.SZ(this.element);const Q=w.getVideoData();this.subscribeButton=new g.wq("\u8a02\u95b1",null,"\u53d6\u6d88\u8a02\u95b1",null,!0,!1,Q.OU,Q.subscribed,"trailer-endscreen",
null,w,!1);g.Y(this,this.subscribeButton);this.subscribeButton.SZ(this.Y.AU("html5-subscribe-button-container"));this.D(w,"videodatachange",this.m8);this.m8();this.hide()}m8(){const w=this.player.getVideoData();this.Y.update({profilePicture:w.profilePicture,author:w.author});this.subscribeButton.channelId=w.OU;var Q=this.subscribeButton;w.subscribed?Q.Y():Q.W()}};var HE3=class extends g.T{constructor(w){const Q=w.j(),G=g.wk||g.tv?{style:"will-change: opacity"}:void 0,J=Q.L,N=["ytp-videowall-still"];Q.W&&N.push("ytp-videowall-show-text");super({S:"a",qc:N,T:{href:"{{url}}",target:J?Q.C:"","aria-label":"{{aria_label}}","data-is-live":"{{is_live}}","data-is-list":"{{is_list}}","data-is-mix":"{{is_mix}}"},N:[{S:"div",X:"ytp-videowall-still-image",T:{style:"{{background}}"}},{S:"span",X:"ytp-videowall-still-info",T:{"aria-hidden":"true"},N:[{S:"span",X:"ytp-videowall-still-info-bg",
N:[{S:"span",X:"ytp-videowall-still-info-content",T:G,N:[{S:"span",X:"ytp-videowall-still-info-title",QX:"{{title}}"},{S:"span",X:"ytp-videowall-still-info-author",QX:"{{author_and_views}}"},{S:"span",X:"ytp-videowall-still-info-live",QX:"\u76f4\u64ad"},{S:"span",X:"ytp-videowall-still-info-duration",QX:"{{duration}}"}]}]}]},{S:"span",qc:["ytp-videowall-still-listlabel-regular","ytp-videowall-still-listlabel"],T:{"aria-hidden":"true"},N:[{S:"span",X:"ytp-videowall-still-listlabel-icon"},"\u64ad\u653e\u6e05\u55ae",
{S:"span",X:"ytp-videowall-still-listlabel-length",N:[" (",{S:"span",QX:"{{playlist_length}}"},")"]}]},{S:"span",qc:["ytp-videowall-still-listlabel-mix","ytp-videowall-still-listlabel"],T:{"aria-hidden":"true"},N:[{S:"span",X:"ytp-videowall-still-listlabel-mix-icon"},"\u5408\u8f2f",{S:"span",X:"ytp-videowall-still-listlabel-length",QX:" (50+)"}]}]});this.suggestion=null;this.W=J;this.api=w;this.Y=new g.WF(this);g.Y(this,this.Y);this.listen("click",this.onClick);this.listen("keypress",this.onKeyPress);
this.Y.D(w,"videodatachange",this.onVideoDataChange);w.createServerVe(this.element,this);this.onVideoDataChange()}select(){this.api.Gz(this.suggestion.videoId,this.suggestion.sessionData,this.suggestion.playlistId,void 0,void 0,this.suggestion.lq||void 0)&&this.api.logClick(this.element)}onClick(w){if(g.PW(this.api.j())&&this.api.U("web_player_log_click_before_generating_ve_conversion_params")){this.api.logClick(this.element);let Q=this.suggestion.Gv();const G={};g.MM(this.api,G);Q=g.SU(Q,G);g.aS(Q,
this.api,w)}else g.DO(w,this.api,this.W,this.suggestion.sessionData||void 0)&&this.select()}onKeyPress(w){switch(w.keyCode){case 13:case 32:w.defaultPrevented||(this.select(),w.preventDefault())}}onVideoDataChange(){const w=this.api.getVideoData(),Q=this.api.j();this.W=w.Vx?!1:Q.L}};var hul=class extends QD{constructor(w){super(w,"videowall-endscreen");this.K=w;this.J=0;this.stills=[];this.G=this.videoData=null;this.Z=this.YB=!1;this.PL=null;this.A=new g.WF(this);g.Y(this,this.A);this.O=new g.ph(()=>{g.NN(this.element,"ytp-show-tiles")},0);
g.Y(this,this.O);var Q=new g.T({S:"button",qc:["ytp-button","ytp-endscreen-previous"],T:{"aria-label":"\u4e0a\u4e00\u90e8"},N:[g.S5()]});g.Y(this,Q);Q.SZ(this.element);Q.listen("click",this.hU,this);this.table=new g.Uh({S:"div",X:"ytp-endscreen-content"});g.Y(this,this.table);this.table.SZ(this.element);Q=new g.T({S:"button",qc:["ytp-button","ytp-endscreen-next"],T:{"aria-label":"\u4e0b\u4e00\u500b"},N:[g.XS()]});g.Y(this,Q);Q.SZ(this.element);Q.listen("click",this.JU,this);w.getVideoData().Nc?this.Y=
new iE(w,!0):this.Y=new Gq(w);g.Y(this,this.Y);g.$z(this.player,this.Y.element,4);w.createClientVe(this.element,this,158789);this.hide()}create(){super.create();var w=this.player.getVideoData();w&&(this.videoData=w);this.W();this.A.D(this.player,"appresize",this.W);this.A.D(this.player,"onVideoAreaChange",this.W);this.A.D(this.player,"videodatachange",this.onVideoDataChange);this.A.D(this.player,"autonavchange",this.C);this.A.D(this.player,"onAutonavCancelled",this.RT);w=this.videoData.autonavState;
w!==this.PL&&this.C(w);this.A.D(this.element,"transitionend",this.kB)}destroy(){g.L0(this.A);g.JD(this.stills);this.stills=[];super.destroy();g.Wv(this.element,"ytp-show-tiles");this.O.stop();this.PL=this.videoData.autonavState}L(){return this.videoData.autonavState!==1}show(){const w=this.rd;super.show();g.Wv(this.element,"ytp-show-tiles");this.player.j().W?g.uu(this.O):this.O.start();(this.Z||this.G&&this.G!==this.videoData.clientPlaybackNonce)&&g.LM(this.player,!1);uU(this)?(wC(this),this.videoData.autonavState===
2?this.player.getVisibilityState()===3||P8(this.player.tK())&&this.player.U("web_player_pip_logging_fix")?this.Y.select(!0):this.Y.J():this.videoData.autonavState===3&&this.Y.A()):(g.LM(this.player,!0),wC(this));w!==this.rd&&this.player.logVisibility(this.element,!0)}hide(){const w=this.rd;super.hide();this.Y.A();wC(this);w!==this.rd&&this.player.logVisibility(this.element,!1)}kB(w){w.target===this.element&&this.W()}W(){var w=this.videoData?.suggestions?.length?this.videoData?.suggestions:[this.videoData?.Mc()];
if(w.length){g.NN(this.element,"ytp-endscreen-paginate");var Q=this.K.Ws(!0,this.K.isFullscreen()),G=g.Qe(this.K);G&&(G=G.Qj()?48:32,Q.width-=G*2);var J=Q.width/Q.height,N=96/54,C=G=2,W=Math.max(Q.width/96,2),t=Math.max(Q.height/54,2),L=w.length;var v=L*4;for(v-=4;v>0&&(G<W||C<t);){var B=G/2,M=C/2,I=G<=W-2&&v>=M*4,m=C<=t-2&&v>=B*4;if((B+1)/M*N/J>J/(B/(M+1)*N)&&m)v-=B*4,C+=2;else if(I)v-=M*4,G+=2;else if(m)v-=B*4,C+=2;else break}N=!1;v>=12&&L*4-v<=6&&(C>=4||G>=4)&&(N=!0);v=G*96;W=C*54;J=v/W<J?Q.height/
W:Q.width/v;J=Math.min(J,2);v=Math.floor(Math.min(Q.width,v*J));W=Math.floor(Math.min(Q.height,W*J));Q=this.table.element;Q.ariaLive="polite";g.s6(Q,v,W);g.jg(Q,{marginLeft:`${v/-2}px`,marginTop:`${W/-2}px`});this.Y.O(this.videoData.Mc());this.Y instanceof iE&&hW(this.Y);g.d(this.element,"ytp-endscreen-takeover",uU(this));wC(this);v+=4;W+=4;J=0;Q.ariaBusy="true";for(t=0;t<G;t++)for(B=0;B<C;B++)if(I=J,m=0,N&&t>=G-2&&B>=C-2?m=1:B%2===0&&t%2===0&&(B<2&&t<2?B===0&&t===0&&(m=2):m=2),I=g.KC(I+this.J,L),
m!==0){M=this.stills[J];M||(M=new HE3(this.player),this.stills[J]=M,Q.appendChild(M.element));var S=Math.floor(W*B/C);const V=Math.floor(v*t/G),y=Math.floor(W*(B+m)/C)-S-4,q=Math.floor(v*(t+m)/G)-V-4;g.Qs(M.element,V,S);g.s6(M.element,q,y);g.jg(M.element,"transitionDelay",(B+t)/20+"s");g.d(M.element,"ytp-videowall-still-mini",m===1);g.d(M.element,"ytp-videowall-still-large",m>2);m=Math.max(q,y);g.d(M.element,"ytp-videowall-still-round-large",m>=256);g.d(M.element,"ytp-videowall-still-round-medium",
m>96&&m<256);g.d(M.element,"ytp-videowall-still-round-small",m<=96);I=w[I];M.suggestion!==I&&(M.suggestion=I,m=M.api.j(),S=g.JZ(M.element,"ytp-videowall-still-large")?"hqdefault.jpg":"mqdefault.jpg",g.tf(M,I,S),g.PW(m)&&!M.api.U("web_player_log_click_before_generating_ve_conversion_params")&&(m=I.Gv(),S={},g.TH(M.api,"addEmbedsConversionTrackingParams",[S]),m=g.SU(m,S),M.updateValue("url",m)),(I=(I=I.sessionData)&&I.itct)&&M.api.setTrackingParams(M.element,I));J++}Q.ariaBusy="false";g.d(this.element,
"ytp-endscreen-paginate",J<L);for(w=this.stills.length-1;w>=J;w--)G=this.stills[w],g.Za(G.element),g.GR(G);this.stills.length=J}}onVideoDataChange(){const w=this.player.getVideoData(1);this.videoData!==w&&(w?.Mc()?(this.J=0,this.videoData=w,this.W()):this.player.WL("missg",{vid:w?.videoId||"",cpn:w?.clientPlaybackNonce||""}))}JU(){this.J+=this.stills.length;this.W()}hU(){this.J-=this.stills.length;this.W()}V(){return this.Y.Y()}C(w){w===1?(this.Z=!1,this.G=this.videoData.clientPlaybackNonce,this.Y.W(),
this.rd&&this.W()):(this.Z=!0,this.rd&&uU(this)&&(w===2?this.Y.J():w===3&&this.Y.A()))}RT(w){if(w){for(w=0;w<this.stills.length;w++)this.K.logVisibility(this.stills[w].element,!0);this.C(1)}else this.G=null,this.Z=!1;this.W()}A0(){return this.rd&&uU(this)}};var jHO=class extends g.T{constructor(w){super({S:"button",qc:["ytp-watch-on-youtube-button","ytp-button"],QX:"{{content}}"});this.K=w;this.buttonType=this.buttonType=1;this.Y();this.buttonType===2&&g.NN(this.element,"ytp-continue-watching-button");this.listen("click",this.onClick);this.listen("videodatachange",this.Y);this.fK(!0)}Y(){let w,Q;switch(this.buttonType){case 1:w="\u5728 YouTube \u4e0a\u518d\u6b21\u89c0\u770b";Q=156915;break;case 2:w="\u524d\u5f80 YouTube \u7e7c\u7e8c\u89c0\u770b";Q=156942;
break;default:w="\u524d\u5f80 YouTube \u7e7c\u7e8c\u89c0\u770b",Q=156942}this.update({content:w});this.K.hasVe(this.element)&&this.K.destroyVe(this.element);this.K.createClientVe(this.element,this,Q)}onClick(w){this.K.U("web_player_log_click_before_generating_ve_conversion_params")&&this.K.logClick(this.element);g.aS(this.getVideoUrl(),this.K,w);this.K.U("web_player_log_click_before_generating_ve_conversion_params")||this.K.logClick(this.element)}getVideoUrl(){var w=!0;switch(this.buttonType){case 1:w=
!0;break;case 2:w=!1}w=this.K.getVideoUrl(w,!1,!1,!0);const Q=this.K.j();if(g.PW(Q)){const G={};g.PW(Q)&&g.TH(this.K,"addEmbedsConversionTrackingParams",[G]);w=g.SU(w,G)}return w}logVisibility(){this.K.logVisibility(this.element,this.rd&&this.Mc)}show(){super.show();this.logVisibility()}hide(){super.hide();this.logVisibility()}ri(w){super.ri(w);this.logVisibility()}};var Et3=class extends QD{constructor(w){super(w,"watch-again-on-youtube-endscreen");this.watchButton=new jHO(w);g.Y(this,this.watchButton);this.watchButton.SZ(this.element);g.uHK(w)&&(this.Y=new g.lXd(w),g.Y(this,this.Y),this.W=new g.T({S:"div",qc:["ytp-watch-again-on-youtube-endscreen-more-videos-container"],T:{tabIndex:"-1"},N:[this.Y]}),g.Y(this,this.W),this.Y.SZ(this.W.element),this.W.SZ(this.element));w.createClientVe(this.element,this,156914);this.hide()}hasSuggestions(){return this.Y?.hasSuggestions()}show(){if(this.player.getPlayerState()!==
3){super.show();const Q=this.W;if(Q){var w=this.Y.hasSuggestions();g.d(this.element,"ytp-shorts-branded-ui",w);w?Q.show():Q.hide()}g.Qe(this.player)?.kZ(!0);this.player.logVisibility(this.element,!0);this.watchButton.ri(!0)}}hide(){super.hide();g.Qe(this.player)?.kZ(!1);this.player.logVisibility(this.element,!1);this.watchButton.ri(!1)}};g.X_("endscreen",class extends g.xO{constructor(w){super(w);this.endScreen=null;this.Y=this.W=this.A=!1;this.listeners=new g.WF(this);g.Y(this,this.listeners);const Q=w.j();w.isEmbedsShortsMode()?this.endScreen=new Et3(w):cw2(w)?(this.A=!0,Ruk(this),this.Y?this.endScreen=new P9o(w):Q.U("delhi_modern_endscreen")?this.endScreen=new gt3(w):this.endScreen=new hul(w)):Q.Pa?this.endScreen=new euJ(w):this.endScreen=new QD(w);g.Y(this,this.endScreen);g.$z(w,this.endScreen.element,4);OEd(this);this.listeners.D(w,
"videodatachange",this.onVideoDataChange,this);this.listeners.D(w,g.Mg("endscreen"),G=>{this.onCueRangeEnter(G)});
this.listeners.D(w,g.IK("endscreen"),G=>{this.onCueRangeExit(G)})}bJ(){var w=this.player.getVideoData();
const Q=w.mutedAutoplay&&(w.limitedPlaybackDurationInSeconds>0||w.endSeconds>0||w.mutedAutoplayDurationMode!==2);if(this.player.isEmbedsShortsMode()&&!Q)return!0;var G=!(!w?.Mc()&&!w?.suggestions?.length);G=!cw2(this.player)||G;w=w.iU;const J=this.player.EK();return G&&!w&&!J&&!Q}A0(){return this.endScreen.A0()}LN(){return this.A0()?this.endScreen.V():!1}Ez(){this.player.nE("endscreen");super.Ez()}load(){{const G=this.player.getVideoData(),J=G.transitionEndpointAtEndOfStream;if(J&&J.videoId){var w=
this.player.LK().Lp.get("heartbeat");var Q=G.Mc();!Q||J.videoId!==Q.videoId||G.Pt?(this.player.Gz(J.videoId,void 0,void 0,!0,!0,J),w&&w.Yy("HEARTBEAT_ACTION_TRIGGER_AT_STREAM_END","HEARTBEAT_ACTION_TRANSITION_REASON_HAS_NEW_STREAM_TRANSITION_ENDPOINT"),w=!0):w=!1}else w=!1}w||(super.load(),this.endScreen.show())}unload(){super.unload();this.endScreen.hide();this.endScreen.destroy()}onCueRangeEnter(w){this.bJ()&&(this.endScreen.created||this.endScreen.create(),w.getId()==="load"&&this.load())}onCueRangeExit(w){w.getId()===
"load"&&this.loaded&&this.unload()}onVideoDataChange(){OEd(this);this.A&&Ruk(this)&&(this.endScreen&&(this.endScreen.hide(),this.endScreen.created&&this.endScreen.destroy(),this.endScreen.dispose()),this.Y?this.endScreen=new P9o(this.player):this.endScreen=new hul(this.player),g.Y(this,this.endScreen),g.$z(this.player,this.endScreen.element,4))}});})(_yt_player);
